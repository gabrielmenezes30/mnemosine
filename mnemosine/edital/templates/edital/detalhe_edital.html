<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ edital.titulo }}</title>
    <style>
        /* CSS Básico para estruturar - personalize para ficar igual à foto */
        body { font-family: sans-serif; background-color: #f4f4f4; }
        .container { max-width: 960px; margin: 20px auto; background: white; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #555; }
        .topico-disciplina { font-weight: bold; margin-top: 20px; padding: 10px; background-color: #eee; }
        .topico-item { display: flex; align-items: center; border-bottom: 1px solid #ddd; padding: 8px 10px; }
        .topico-item .descricao { flex-grow: 1; }
        .topico-item .controles { display: flex; gap: 15px; }
        .topico-item input[type="checkbox"] { margin: 0 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Edital Verticalizado: {{ edital.titulo }}</h1>
        <hr>
        {% for topico in topicos_principais %}
            <div class="topico-disciplina">
                {{ topico.descricao }}
            </div>
            
            {% for subtopico in topico.subtopicos.all %}
                <form action="{% url 'atualizar_status_topico' subtopico.id %}" method="post" class="topico-item">
                    {% csrf_token %}
                    <span class="descricao">{{ subtopico.descricao }}</span>
                    <div class="controles">
                        <span>T: <input type="checkbox" name="teoria" {% if subtopico.teoria_concluida %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R1: <input type="checkbox" name="revisao1" {% if subtopico.revisao1 %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R2: <input type="checkbox" name="revisao2" {% if subtopico.revisao2 %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R3: <input type="checkbox" name="revisao3" {% if subtopico.revisao3 %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R4: <input type="checkbox" name="revisao4" {% if subtopico.revisao4 %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R5: <input type="checkbox" name="revisao5" {% if subtopico.revisao5 %}checked{% endif %} onchange="this.form.submit()"></span>
                        <span>R6: <input type="checkbox" name="revisao6" {% if subtopico.revisao6 %}checked{% endif %} onchange="this.form.submit()"></span>
                    </div>
                </form>
            {% empty %}
                <form action="{% url 'atualizar_status_topico' topico.id %}" method="post" class="topico-item">
                    {% csrf_token %}
                    <span class="descricao">{{ topico.descricao }} (Item único)</span>
                    <div class="controles">
                        <span>T: <input type="checkbox" name="teoria" {% if topico.teoria_concluida %}checked{% endif %} onchange="this.form.submit()"></span>
                        </div>
                </form>
            {% endfor %}
        {% endfor %}
    </div>
</body>
</html>